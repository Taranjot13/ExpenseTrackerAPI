name: CI/CD Pipeline

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  test:
    name: Run Tests
    uses: ./.github/workflows/test.yml

  build:
    name: Build Docker
    needs: test
    uses: ./.github/workflows/docker.yml

  deploy-notification:
    name: Deployment Ready
    runs-on: ubuntu-latest
    needs: [test, build]
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'

    steps:
      - name: Deployment Ready Notification
        run: |
          echo "âœ… All tests passed"
          echo "âœ… Docker image built successfully"
          echo "ðŸ“¦ Ready for deployment"
          echo ""
          echo "Next steps:"
          echo "1. Pull the latest image: docker pull ghcr.io/${{ github.repository }}:latest"
          echo "2. Update docker-compose.yml to use the new image"
          echo "3. Deploy: docker-compose up -d"
          echo ""
          echo "Note: AWS deployment is not configured in this workflow"
